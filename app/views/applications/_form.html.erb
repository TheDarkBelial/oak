<fieldset class="fieldset bg-base-200 border-base-300 rounded-box border p-4 shadow-lg w-full max-w-lg sm:w-lg mx-auto">
  <legend class="fieldset-legend"><%= content_for(:title) %></legend>

  <%# Turbo is disabled to allow for redirects with anchors: https://github.com/hotwired/turbo/issues/211 %>
  <%= form_with(model: application, class: "contents", data: { turbo: false }) do |form| %>
    <% if application.errors.any? %>
      <div id="error_explanation" class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-md mt-3">
        <h2><%= pluralize(application.errors.count, "error") %> prohibited this application from being saved:</h2>

        <ul class="list-disc ml-6">
          <% application.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%= form.label :name, class: "label" %>
    <%= form.text_field :name, required: true, class: "input w-full validator" %>

    <%= form.label :url, class: "label" %>
    <%= form.url_field :url, required: true, class: "input w-full validator" %>

    <%= form.label :icon_id, class: "label" %>
    <%= form.select :icon_id, Icon.svg.dark_theme.map { |icon| [icon.name, icon.id] }.uniq, { required: true }, class: "select w-full validator" %>

    <%= form.submit class: "btn btn-primary mt-4" %>
    <% if application.new_record? %>
      <%= link_to "Back", applications_path, class: "btn btn-outline" %>
    <% else %>
      <%= link_to "Back", applications_path(anchor: application.token), class: "btn btn-outline" %>
    <% end %>
  <% end %>
</fieldset>
